<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>NÄ°SA</title>

  <script>
    if (!window.location.search.includes('v=')) {
      const newUrl = window.location.pathname + '?v=' + Date.now();
      window.location.replace(newUrl);
    }
  </script>

  <!-- Mistik / ruhani font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Marcellus&display=swap" rel="stylesheet">

  <style>
  /* ARKA PLAN */
  body {
    overflow: hidden;
    background: radial-gradient(circle, #3b0e68 0%, #1a084e 100%);
    font-family: system-ui, sans-serif;
    color: #fff;
    transition: background 1.2s ease;
  }

  body.space-mode {
    background: radial-gradient(circle at center, #190033 0%, #0d0020 50%, #050012 100%);
  }

  /* 8 SANÄ°YELÄ°K WARP GEÃ‡Ä°ÅžÄ° */
  .warp-overlay {
    position: fixed;
    inset: 0;
    z-index: 999;
    pointer-events: none;
    background: radial-gradient(circle at center,
      rgba(180,220,255,1) 0%,
      rgba(130,160,255,0.9) 15%,
      rgba(90,0,160,0.8) 35%,
      rgba(20,0,40,1) 55%,
      rgba(0,0,0,1) 80%);
    animation: warpZoom 8s ease-in-out forwards;
  }

  @keyframes warpZoom {
    0%   { transform: scale(1);   opacity: 1; }
    30%  { transform: scale(2.4); opacity: 1; }
    60%  { transform: scale(4);   opacity: 0.9; }
    100% { transform: scale(7);   opacity: 0; }
  }

  /* ÅžÄ°FRE KUTUSU */
  .password-wrapper {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 10;
    width: 70%;
    max-width: 500px;
  }

  .password-box {
    width: 100%;
    background: rgba(12, 3, 36, 0.92);
    border-radius: 18px;
    padding: 12px 20px;
    display: flex;
    gap: 12px;
    align-items: center;
    box-shadow:
      0 0 25px rgba(184, 88, 255, 0.55),
      0 0 45px rgba(78, 232, 255, 0.30);
    border: 1px solid rgba(183, 121, 255, 0.8);
  }

  .password-input {
    background: rgba(15, 5, 50, 0.9);
    border: 1px solid rgba(204,153,255,0.8);
    border-radius: 10px;
    padding: 9px 12px;
    color: #fff;
    outline: none;
    width: 80%;
    font-size: 15px;
    transition: 0.25s ease;
    z-index: 20;
  }

  .password-input.glow {
    border-color: #ff66ff;
    box-shadow:
      0 0 10px #ff33ff,
      0 0 20px #ff33ff,
      inset 0 0 10px rgba(255, 0, 255, 0.4);
  }

  .password-btn {
    background: linear-gradient(135deg, #f806f9, #5ce6ff);
    border: none;
    border-radius: 12px;
    padding: 10px 16px;
    cursor: pointer;
    color: #fff;
    font-weight: 600;
    font-size: 14px;
    white-space: nowrap;
    z-index: 20;
  }

  .pw-error {
    margin-top: 15px;
    padding: 12px;
    text-align: center;
    font-size: 16px;
    font-weight: 750; /* daha tok bir kalÄ±nlÄ±k */
    border-radius: 14px;
    background: rgba(255, 0, 221, 0.12);
    backdrop-filter: blur(8px);
    border: 1px solid rgba(255, 157, 255, 0.55);
    color: #ffb9ff;

    opacity: 0;
    transform: translateY(10px);
    transition: opacity .4s ease, transform .4s ease;

    /* ðŸŒŸ GÃ¶lge eklendi */
    text-shadow:
      0 0 8px rgba(255, 150, 255, 0.55),
      0 0 14px rgba(255, 100, 255, 0.45),
      0 0 22px rgba(180, 80, 255, 0.35);
}



  .pw-error.show { opacity: 1; transform: translateY(0); }

  /* MÄ°KROFON */
  .mic {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    cursor: pointer;
    z-index: 8;
  }

  .mic::before,
  .mic::after {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    border-radius: 100%;
    transform: translate(-50%, -50%);
    box-shadow: 0 0 20px 20px #1c084f;
  }

  .mic::before {
    width: 400px; height: 400px;
    background-color: #1a084e;
  }

  .mic::after {
    width: 250px; height: 250px;
    background-color: #2f1e5f;
    animation: circlePulse 0.8s linear infinite alternate;
  }

  @keyframes circlePulse {
    from { width: 250px; height: 250px; }
    to   { width: 300px; height: 300px; }
  }

  .mic-icon {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(5);
    width: 16px;
    height: 12px;
    border: 2px solid;
    border-top: 0;
    border-radius: 0 0 120px 120px;
    margin-top: 20px;
    z-index: 10;
  }

  .mic-icon::before,
  .mic-icon::after {
    content:"";
    position: absolute;
  }

  .mic-icon::before {
    width: 2px;
    height: 5px;
    top: calc(100% + 1px);
    left: 50%;
    transform: translate(-50%, 0);
    background-color: #fff;
  }

  .mic-icon::after {
    width: 8px;
    height: 18px;
    border: 2px solid;
    border-radius: 4px;
    top: -10px;
    left: 50%;
    transform: translate(-50%, 0);
  }

  .mic-shadow {
    width: 400px;
    height: 400px;
    position: absolute;
    top: 50%;
    left: 50%;
    border-radius: 100%;
    z-index: 1;
    box-shadow:
      10px -55px 30px 15px #823ca6,
      24px -10px 47px 10px #aab3d2,
      21px 25px 97px 10px #5acee3,
      51px 5px 17px 10px #1b7d8f,
      3px 2px 77px 10px #f30bf5;
    transform: translate(-50%, -50%);
    transform-origin: 50% 50%;
    animation: shadow-rotate 1.5s linear infinite;
  }

  @keyframes shadow-rotate {
    from { transform: translate(-50%, -50%) rotate(0deg); }
    to   { transform: translate(-50%, -50%) rotate(360deg); }
  }

  /* KALP + KAR */
  .heart {
    position: fixed;
    top: -40px;
    font-size: 18px;
    z-index: 20;
    animation: fall var(--dur, 8s) linear forwards;
  }

  @keyframes fall {
    to { transform: translate(var(--dx), 120vh); opacity:0; }
  }

  .snowflake {
    position: fixed;
    top: -10px;
    color: white;
    opacity: 0.85;
    font-size: 14px;
    z-index: 15;
    animation: snow 8s linear forwards;
  }

  @keyframes snow {
    to { transform: translateY(120vh) rotate(360deg); opacity: 0; }
  }

  /* WARP SONRASI YAZI */
  .final-text {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: min(72%, 760px);
    text-align: center;

    font-family: "Marcellus", "Times New Roman", serif;
    font-size: 26px;
    font-weight: 600;
    line-height: 1.85;
    letter-spacing: 0.6px;

    color: #ffffff;

    padding: 0 24px;
    background: none;
    border: none;
    box-shadow: none;

    opacity: 0;
    filter: blur(7px);
    transition: opacity 2.6s ease, filter 2.6s ease;

    text-shadow:
      0 0 12px rgba(255, 255, 255, 0.35),
      0 0 32px rgba(180, 120, 255, 0.45),
      0 0 60px rgba(100, 60, 200, 0.35);
  }

  .final-text::before {
    content: "";
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    width: 115%;
    height: 2px;
    background: linear-gradient(
      90deg,
      rgba(0,0,0,0) 0%,
      rgba(255,255,255,0.35) 30%,
      rgba(172,128,255,0.8) 50%,
      rgba(255,255,255,0.35) 70%,
      rgba(0,0,0,0) 100%
    );
    filter: blur(5px);
    opacity: 0.9;
    pointer-events: none;
    z-index: -1;
  }

  .final-text::after {
    content: "";
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    width: 160%;
    height: 260%;
    background: radial-gradient(
      circle at center,
      rgba(255,255,255,0.14) 0%,
      rgba(180,120,255,0.15) 30%,
      rgba(0,0,0,0) 70%
    );
    filter: blur(20px);
    opacity: 0.9;
    pointer-events: none;
    z-index: -2;
  }
  </style>
</head>

<body>

<!-- 1. MÃœZÄ°K: ARKA PLAN -->
<audio id="bgAudio" src="sounds/arkaplan.mp3" loop preload="auto" autoplay></audio>

<!-- 2. MÃœZÄ°K: ÅžÄ°FRE SONRASI -->
<audio id="player" preload="auto"></audio>

<div class="password-wrapper" id="pwArea">
  <div class="password-box" id="pwBox">
    <input id="pwInput" class="password-input" type="text"
      placeholder="FÄ±sÄ±ldaâ€¦ iÃ§erideki kapÄ± yalnÄ±zca sana aÃ§Ä±lÄ±r.">
    <button class="password-btn" onclick="checkPw()">GÄ°R</button>
  </div>

  <div id="pwError" class="pw-error">
    Bu olmadÄ± ama sen zaten doÄŸruyu aklÄ±nla deÄŸil, hislerinle buluyorsunâ€¦ bir kez daha dinle iÃ§ini.
  </div>
</div>

<div class="mic" id="mic">
  <i class="mic-icon"></i>
  <div class="mic-shadow"></div>
</div>

<!-- warp sonrasÄ± gÃ¶rÃ¼nen yazÄ± -->
<div id="finalText" class="final-text">
  Bazen biri Ã§Ä±kar, daha doÄŸru dÃ¼zgÃ¼n tanÄ±mazsÄ±n ama hissettirdiÄŸi ÅŸey garip ÅŸekilde tanÄ±dÄ±k gelirâ€¦ iÅŸte o his, insanÄ± istemeden gÃ¼lÃ¼msetir. DÃ¼n gece hissettirdiklerin de o tanÄ±dÄ±klÄ±ÄŸÄ±n iÃ§ine Ã§ok gÃ¼zel karÄ±ÅŸtÄ±.
</div>

<script>
const pwArea  = document.getElementById("pwArea");
const pwError = document.getElementById("pwError");
const pwBox   = document.getElementById("pwBox");
const pwInput = document.getElementById("pwInput");
const mic     = document.getElementById("mic");

const bgAudio = document.getElementById("bgAudio"); // 1. mÃ¼zik
const player  = document.getElementById("player");  // 2. mÃ¼zik

// ÅŸifre: "hayÄ±rlÄ± kadÄ±n"
const pwdArr = [33,40,48,376,59,37,376,105,34,40,45,376,39];
const salt   = 73;

function isCorrect(input) {
  if (input.length !== pwdArr.length) return false;
  for (let i = 0; i < pwdArr.length; i++) {
    if ((input.charCodeAt(i) ^ salt) !== pwdArr[i]) return false;
  }
  return true;
}

/* arka plan mÃ¼ziÄŸini baÅŸlatma (autoplay engeli iÃ§in) */
window.addEventListener("load", () => {
  bgAudio.play().catch(() => {});
});

document.addEventListener("click", () => {
  if (bgAudio.paused) bgAudio.play().catch(() => {});
}, { once: true });

pwInput.addEventListener("input", () => {
  pwInput.value.trim() !== ""
    ? pwInput.classList.add("glow")
    : pwInput.classList.remove("glow");
});

pwInput.addEventListener("keydown", (e) => {
  if (e.key === "Enter") checkPw();
});

/* KALP */
function spawnHeart() {
  const el = document.createElement("div");
  el.classList.add("heart");

  const arr = ["â¤ï¸","ðŸ’—","ðŸ’"];
  el.innerHTML = arr[Math.floor(Math.random() * arr.length)];

  const startX = Math.random() * window.innerWidth;
  const dx = (Math.random() - 0.5) * 200;
  const dur = 10 + Math.random() * 6;
  const size = 12 + Math.random() * 4;

  el.style.left = startX + "px";
  el.style.setProperty("--dx", dx + "px");
  el.style.setProperty("--dur", dur + "s");
  el.style.fontSize = size + "px";

  document.body.appendChild(el);
  setTimeout(() => el.remove(), dur * 1000);
}
setInterval(spawnHeart, 550);

/* KAR */
function spawnSnow() {
  const el = document.createElement("div");
  el.classList.add("snowflake");

  const arr = ["â„","â™¡"];
  el.innerHTML = arr[Math.floor(Math.random() * arr.length)];

  const startX = Math.random() * window.innerWidth;
  const size = 10 + Math.random() * 4;
  const dur = 10 + Math.random() * 6;

  el.style.left = startX + "px";
  el.style.fontSize = size + "px";
  el.style.animationDuration = dur + "s";

  document.body.appendChild(el);
  setTimeout(() => el.remove(), dur * 1000);
}
setInterval(spawnSnow, 420);

/* WARP */
function triggerSpaceWarp() {
  document.body.classList.add("space-mode");

  const warp = document.createElement("div");
  warp.classList.add("warp-overlay");
  document.body.appendChild(warp);

  setTimeout(() => warp.remove(), 8100);
}

/* ÅžÄ°FRE SONRASI 2. MÃœZÄ°K */
function playSecondMusic() {
  player.src = "sounds/sonrasises.mp3"; // ÅŸifre sonrasÄ± mÃ¼ziÄŸin dosya adÄ±
  player.currentTime = 0;
  player.play().catch(() => {});
}

/* ÅžÄ°FRE KONTROL */
function checkPw() {
  const val = pwInput.value.trim();

  if (isCorrect(val)) {
    pwArea.style.display = "none";
    mic.style.display = "none";

    // 1. mÃ¼ziÄŸi durdur
    bgAudio.pause();
    bgAudio.currentTime = 0;

    // 2. mÃ¼ziÄŸi baÅŸlat
    playSecondMusic();

    // warp efekti
    triggerSpaceWarp();

    // warp ortasÄ± gibi yazÄ±yÄ± gÃ¶ster
    setTimeout(() => {
      const txt = document.getElementById("finalText");
      txt.style.opacity = "1";
      txt.style.filter   = "blur(0)";
    }, 5500);

  } else {
    pwError.classList.add("show");
    pwBox.classList.add("shake");
    setTimeout(() => pwBox.classList.remove("shake"), 300);
  }
}

/* mic tÄ±klayÄ±nca kalp */
mic.addEventListener("click", () => spawnHeart());
</script>

</body>
</html>

